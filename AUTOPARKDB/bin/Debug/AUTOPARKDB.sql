/*
Deployment script for Путевые листы

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "Путевые листы"
:setvar DefaultFilePrefix "Путевые листы"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [master];


GO

IF (DB_ID(N'$(DatabaseName)') IS NOT NULL) 
BEGIN
    ALTER DATABASE [$(DatabaseName)]
    SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE [$(DatabaseName)];
END

GO
PRINT N'Creating $(DatabaseName)...'
GO
CREATE DATABASE [$(DatabaseName)]
    ON 
    PRIMARY(NAME = [$(DatabaseName)], FILENAME = N'$(DefaultDataPath)$(DefaultFilePrefix)_Primary.mdf')
    LOG ON (NAME = [$(DatabaseName)_log], FILENAME = N'$(DefaultLogPath)$(DefaultFilePrefix)_Primary.ldf') COLLATE SQL_Latin1_General_CP1_CI_AS
GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ANSI_NULLS ON,
                ANSI_PADDING ON,
                ANSI_WARNINGS ON,
                ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                NUMERIC_ROUNDABORT OFF,
                QUOTED_IDENTIFIER ON,
                ANSI_NULL_DEFAULT ON,
                CURSOR_DEFAULT LOCAL,
                RECOVERY FULL,
                CURSOR_CLOSE_ON_COMMIT OFF,
                AUTO_CREATE_STATISTICS ON,
                AUTO_SHRINK OFF,
                AUTO_UPDATE_STATISTICS ON,
                RECURSIVE_TRIGGERS OFF 
            WITH ROLLBACK IMMEDIATE;
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_CLOSE OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ALLOW_SNAPSHOT_ISOLATION OFF;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET READ_COMMITTED_SNAPSHOT OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_UPDATE_STATISTICS_ASYNC OFF,
                PAGE_VERIFY NONE,
                DATE_CORRELATION_OPTIMIZATION OFF,
                DISABLE_BROKER,
                PARAMETERIZATION SIMPLE,
                SUPPLEMENTAL_LOGGING OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET TRUSTWORTHY OFF,
        DB_CHAINING OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET HONOR_BROKER_PRIORITY OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
ALTER DATABASE [$(DatabaseName)]
    SET TARGET_RECOVERY_TIME = 0 SECONDS 
    WITH ROLLBACK IMMEDIATE;


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET FILESTREAM(NON_TRANSACTED_ACCESS = OFF),
                CONTAINMENT = NONE 
            WITH ROLLBACK IMMEDIATE;
    END


GO
USE [$(DatabaseName)];


GO
IF fulltextserviceproperty(N'IsFulltextInstalled') = 1
    EXECUTE sp_fulltext_database 'enable';


GO
/*
 Pre-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be executed before the build script.	
 Use SQLCMD syntax to include a file in the pre-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the pre-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/
GO

GO
PRINT N'Creating [dbo].[Водители авто]...';


GO
CREATE TABLE [dbo].[Водители авто] (
    [ID]          INT IDENTITY (1, 1) NOT NULL,
    [ID_Водитель] INT NOT NULL,
    [ID_Авто]     INT NOT NULL,
    CONSTRAINT [PK_Водители авто] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
PRINT N'Creating [dbo].[Данные Путевой лист легкового авто]...';


GO
CREATE TABLE [dbo].[Данные Путевой лист легкового авто] (
    [id_Данных]                            INT           NOT NULL,
    [ID_Путевого листа]                    INT           NULL,
    [Число]                                NVARCHAR (50) NOT NULL,
    [Время выезда]                         TIME (7)      NOT NULL,
    [Время возвращения]                    TIME (7)      NOT NULL,
    [Время в наряде]                       TIME (7)      NOT NULL,
    [Показания спидометра при выезде]      INT           NOT NULL,
    [Показания спидометра при возвращении] INT           NOT NULL,
    [Пробег км]                            NVARCHAR (50) NOT NULL,
    [Остаток топлива при выезде]           FLOAT (53)    NOT NULL,
    [Остаток топлива при возвращении]      FLOAT (53)    NOT NULL,
    [Заправлено топлива л]                 FLOAT (53)    NOT NULL,
    [Дата и № чека АЗС]                    NVARCHAR (50) NULL,
    [Расход топлива по норме]              FLOAT (53)    NULL,
    [Расход топлива фактически]            FLOAT (53)    NULL,
    [Расход топлива экономия перерасход]   FLOAT (53)    NULL,
    CONSTRAINT [PK_Путевой лист легкового авто] PRIMARY KEY CLUSTERED ([id_Данных] ASC)
);


GO
PRINT N'Creating [dbo].[Движение ТСМ]...';


GO
CREATE TABLE [dbo].[Движение ТСМ] (
    [ID_Движение ТМЦ]             INT           NOT NULL,
    [ID_Путевого листа]           INT           NOT NULL,
    [Остаток ТСМ при выезде]      NVARCHAR (50) NOT NULL,
    [Остаток ТСМ при возвращении] NVARCHAR (50) NULL,
    CONSTRAINT [PK_Движение ТСМ_Путевой лист Грузового авто] PRIMARY KEY CLUSTERED ([ID_Движение ТМЦ] ASC)
);


GO
PRINT N'Creating [dbo].[Задание водителю]...';


GO
CREATE TABLE [dbo].[Задание водителю] (
    [id]                              INT            NOT NULL,
    [ID_Путевого листа]               INT            NOT NULL,
    [Заказчик]                        NVARCHAR (50)  NULL,
    [Дата и время прибытия]           DATETIME       NULL,
    [Дата и время убытия]             DATETIME       NULL,
    [Пункт отправления]               NVARCHAR (100) NULL,
    [Пункт назначения]                NVARCHAR (100) NULL,
    [Расстояние км]                   FLOAT (53)     NULL,
    [Наименование груза]              NVARCHAR (100) NULL,
    [Вес груза т]                     FLOAT (53)     NULL,
    [Количество поездок с грузом час] INT            NULL,
    CONSTRAINT [PK_Задание водителю] PRIMARY KEY CLUSTERED ([id] ASC)
);


GO
PRINT N'Creating [dbo].[Заправка ТСМ]...';


GO
CREATE TABLE [dbo].[Заправка ТСМ] (
    [ID_Заправка ТСМ]   INT           IDENTITY (1, 1) NOT NULL,
    [Дата]              DATE          NULL,
    [Марка ТСМ]         NVARCHAR (50) NULL,
    [Количество]        FLOAT (53)    NULL,
    [ID_Путевого листа] INT           NULL,
    CONSTRAINT [PK_Заправка ТСМ] PRIMARY KEY CLUSTERED ([ID_Заправка ТСМ] ASC)
);


GO
PRINT N'Creating [dbo].[Личный состав]...';


GO
CREATE TABLE [dbo].[Личный состав] (
    [табельный  номер]                  INT           NOT NULL,
    [ФИО]                               NVARCHAR (50) NOT NULL,
    [серия водительского удостоверения] NVARCHAR (50) NOT NULL,
    [номер водительского удостоверения] INT           NOT NULL,
    [классность]                        INT           NOT NULL,
    [срок действия мед. справки]        DATE          NOT NULL,
    CONSTRAINT [PK_личный состав] PRIMARY KEY CLUSTERED ([табельный  номер] ASC)
);


GO
PRINT N'Creating [dbo].[Нормы расхода ГСМ на авто,тракторы]...';


GO
CREATE TABLE [dbo].[Нормы расхода ГСМ на авто,тракторы] (
    [ID]                                                       INT           IDENTITY (1, 1) NOT NULL,
    [Марка автомобиля]                                         NVARCHAR (30) NOT NULL,
    [Вид топлива]                                              NVARCHAR (10) NULL,
    [Норма расхода на 100 км летняя 6%]                        FLOAT (53)    NULL,
    [Марка двигателя]                                          NVARCHAR (30) NULL,
    [Норма на машино час летняя]                               FLOAT (53)    NULL,
    [Н-ма расх.масел на 100л р-да топлива моторное,л]          FLOAT (53)    NULL,
    [Н-ма расх.масел на 100л р-да трансмиссионное,л]           FLOAT (53)    NULL,
    [Н-ма расх.масел на 100л р-да топлива специальное,л]       FLOAT (53)    NULL,
    [Н-ма расх.масел на 100л р-да топлива пластичные смазки,л] FLOAT (53)    NULL,
    CONSTRAINT [Нормы_ID] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
PRINT N'Creating [dbo].[Подвижной состав]...';


GO
CREATE TABLE [dbo].[Подвижной состав] (
    [ID]                       INT           IDENTITY (1, 1) NOT NULL,
    [Марка и модель]           NVARCHAR (50) NOT NULL,
    [Гос.номер]                NVARCHAR (50) NOT NULL,
    [Гаражный номер]           NVARCHAR (50) NULL,
    [Тип двигателя]            NVARCHAR (50) NULL,
    [Год выпуска]              DATE          NULL,
    [Инвентарный номер]        NVARCHAR (50) NULL,
    [Вид топлива]              NVARCHAR (50) NULL,
    [дата окончания страховки] DATE          NULL,
    CONSTRAINT [PK_Подвижной состав] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
PRINT N'Creating [dbo].[Путевой лист Грузового авто]...';


GO
CREATE TABLE [dbo].[Путевой лист Грузового авто] (
    [ID_Путевого листа]    INT  IDENTITY (1, 1) NOT NULL,
    [Номер путевого листа] INT  NOT NULL,
    [Дата путевого листа]  DATE NOT NULL,
    [ID_Водителя]          INT  NOT NULL,
    [ID_Автомобиля]        INT  NOT NULL,
    CONSTRAINT [Пут_груз_ID] PRIMARY KEY CLUSTERED ([ID_Путевого листа] ASC)
);


GO
PRINT N'Creating [dbo].[Путевой лист легкового автомобиля]...';


GO
CREATE TABLE [dbo].[Путевой лист легкового автомобиля] (
    [ID_Путевого листа]    INT           IDENTITY (1, 1) NOT NULL,
    [Номер путевого листа] NVARCHAR (10) NULL,
    [За период с]          DATETIME      NULL,
    [За период по]         DATETIME      NULL,
    [ID_Автомобиль]        INT           NULL,
    [ID_Водитель]          INT           NULL,
    CONSTRAINT [Пут_легк_ID] PRIMARY KEY CLUSTERED ([ID_Путевого листа] ASC)
);


GO
PRINT N'Creating [dbo].[Работа водителя и автомобиля]...';


GO
CREATE TABLE [dbo].[Работа водителя и автомобиля] (
    [ID_работа водителя и авто]     INT           IDENTITY (1, 1) NOT NULL,
    [ID_Путевого листа]             INT           NULL,
    [Операции]                      NVARCHAR (50) NOT NULL,
    [Показания спидометра]          INT           NULL,
    [Дата и время по графику]       DATETIME      NULL,
    [Дата и время фактически]       DATETIME      NULL,
    [Нулевой пробег]                INT           NULL,
    [Время работы двигателя час]    INT           NULL,
    [Время работы спецоборудования] INT           NULL,
    CONSTRAINT [PK_Работа водителя и автомобиля] PRIMARY KEY CLUSTERED ([ID_работа водителя и авто] ASC)
);


GO
PRINT N'Creating FK_Водители авто_id_водитель...';


GO
ALTER TABLE [dbo].[Водители авто]
    ADD CONSTRAINT [FK_Водители авто_id_водитель] FOREIGN KEY ([ID_Водитель]) REFERENCES [dbo].[Личный состав] ([табельный  номер]);


GO
PRINT N'Creating FK_Водители авто_id_авто...';


GO
ALTER TABLE [dbo].[Водители авто]
    ADD CONSTRAINT [FK_Водители авто_id_авто] FOREIGN KEY ([ID_Авто]) REFERENCES [dbo].[Подвижной состав] ([ID]);


GO
PRINT N'Creating FK_Данные Путевой лист легкового авто_Путевой лист легкового автомобиля...';


GO
ALTER TABLE [dbo].[Данные Путевой лист легкового авто]
    ADD CONSTRAINT [FK_Данные Путевой лист легкового авто_Путевой лист легкового автомобиля] FOREIGN KEY ([ID_Путевого листа]) REFERENCES [dbo].[Путевой лист легкового автомобиля] ([ID_Путевого листа]);


GO
PRINT N'Creating FK_Движение ТСМ_Путевой лист Грузового авто...';


GO
ALTER TABLE [dbo].[Движение ТСМ]
    ADD CONSTRAINT [FK_Движение ТСМ_Путевой лист Грузового авто] FOREIGN KEY ([ID_Путевого листа]) REFERENCES [dbo].[Путевой лист Грузового авто] ([ID_Путевого листа]);


GO
PRINT N'Creating FK_Задание водителю_Путевой лист Грузового авто...';


GO
ALTER TABLE [dbo].[Задание водителю]
    ADD CONSTRAINT [FK_Задание водителю_Путевой лист Грузового авто] FOREIGN KEY ([ID_Путевого листа]) REFERENCES [dbo].[Путевой лист Грузового авто] ([ID_Путевого листа]);


GO
PRINT N'Creating FK_Путевой лист Грузового авто_личный состав...';


GO
ALTER TABLE [dbo].[Путевой лист Грузового авто]
    ADD CONSTRAINT [FK_Путевой лист Грузового авто_личный состав] FOREIGN KEY ([ID_Водителя]) REFERENCES [dbo].[Личный состав] ([табельный  номер]);


GO
PRINT N'Creating FK_Путевой лист Грузового авто_Подвижной состав...';


GO
ALTER TABLE [dbo].[Путевой лист Грузового авто]
    ADD CONSTRAINT [FK_Путевой лист Грузового авто_Подвижной состав] FOREIGN KEY ([ID_Автомобиля]) REFERENCES [dbo].[Подвижной состав] ([ID]);


GO
PRINT N'Creating FK_Путевой лист легкового автомобиля_Подвижной состав...';


GO
ALTER TABLE [dbo].[Путевой лист легкового автомобиля]
    ADD CONSTRAINT [FK_Путевой лист легкового автомобиля_Подвижной состав] FOREIGN KEY ([ID_Автомобиль]) REFERENCES [dbo].[Подвижной состав] ([ID]);


GO
PRINT N'Creating FK_Путевой лист легкового автомобиля_личный состав...';


GO
ALTER TABLE [dbo].[Путевой лист легкового автомобиля]
    ADD CONSTRAINT [FK_Путевой лист легкового автомобиля_личный состав] FOREIGN KEY ([ID_Водитель]) REFERENCES [dbo].[Личный состав] ([табельный  номер]);


GO
PRINT N'Creating FK_Данные Путевой лист легкового авто_Путевой лист грузового автомобиля...';


GO
ALTER TABLE [dbo].[Работа водителя и автомобиля]
    ADD CONSTRAINT [FK_Данные Путевой лист легкового авто_Путевой лист грузового автомобиля] FOREIGN KEY ([ID_Путевого листа]) REFERENCES [dbo].[Путевой лист Грузового авто] ([ID_Путевого листа]);


GO
PRINT N'Creating [dbo].[View_Данные путевой лист легкового авто]...';


GO
CREATE VIEW [dbo].[View_Данные путевой лист легкового авто]
AS SELECT     [Число], 
			[Время выезда] AS Время_выезда, 
			[Время возвращения] AS Время_возвращения, 
			[Время в наряде] AS Время_в_наряде, 
            [Показания спидометра при выезде] AS Показания_спидометра_при_выезде, 
            [Показания спидометра при возвращении] AS Показания_спидометра_при_возращении,
			[Пробег км] AS Пробег_км, 
            [Остаток топлива при выезде] AS Остаток_топлива_при_выезде, 
			[Остаток топлива при возвращении] AS Остаток_топлива_при_возвращении, 
            [Заправлено топлива л] AS Заправлено_топливо_л, 
			[Дата и № чека АЗС] AS Дата_и_номер_чека_АЗС, 
            [Расход топлива по норме] AS Расход_топлива_по_норме, 
			[Расход топлива фактически] AS Расход_топлива_фактически, 
            [Расход топлива экономия перерасход] AS Расход_топлива_экономия_перерасход, 
            '' AS Автомобиль_технически_исправлен_выезд_разрешен_подпись_штамп_уполномоченного_лица,
            '' AS Автомобиль_технически_исправлен_прнял_подпись_водителя, 
            '' AS При_возвращении_автомобиль_сдал_подпись_водителя, 
            '' AS При_возвращении_автомобиль_принял_подпись_штамп_уполномоченного_лица,
            '' AS Водитель_по_состоянию_здоровья_к_управлению_допущен_подпись_штамп_уполномоченного_лица,
            '' AS Подпись_штамп_лица_ответственного_за_оформление_путевого_листа
FROM         dbo.[Данные Путевой лист легкового авто]
GO
PRINT N'Creating [dbo].[View_Работа водителя и автомобиля]...';


GO
CREATE VIEW [dbo].[View_Работа водителя и автомобиля]
	AS SELECT     Операции, [Показания спидометра] AS Показания_спидометра, [Дата и время по графику] AS Дата_и_время_по_графику, 
                      [Дата и время фактически] AS Дата_и_время_фактически, [Нулевой пробег] AS Нулевой_пробег, 
                      [Время работы двигателя час] AS Время_работы_двигателя_час, [Время работы спецоборудования] AS Время_работы_спецоборудования
FROM         dbo.[Работа водителя и автомобиля]
GO
/*
Post-Deployment Script Template							
--------------------------------------------------------------------------------------
 This file contains SQL statements that will be appended to the build script.		
 Use SQLCMD syntax to include a file in the post-deployment script.			
 Example:      :r .\myfile.sql								
 Use SQLCMD syntax to reference a variable in the post-deployment script.		
 Example:      :setvar TableName MyTable							
               SELECT * FROM [$(TableName)]					
--------------------------------------------------------------------------------------
*/


IF NOT EXISTS (SELECT ID FROM [Нормы расхода ГСМ на авто,тракторы])
BEGIN
SET IDENTITY_INSERT [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы] on
INSERT INTO [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы]
           ([ID] ,[Марка автомобиля],[Вид топлива],[Норма расхода на 100 км летняя 6%] ,
           [Марка двигателя],[Норма на машино час летняя] ,
           [Н-ма расх.масел на 100л р-да топлива моторное,л],[Н-ма расх.масел на 100л р-да трансмиссионное,л] ,[Н-ма расх.масел на 100л р-да топлива специальное,л],[Н-ма расх.масел на 100л р-да топлива пластичные смазки,л])
     VALUES
           (1,'ГАЗ 3110','бен.',9.9,'ЗМЗ 4062', NULL, 1.7,0.15,0.05,0.1),
           (2,'УАЗ 3303','бен.',15.2,'ЗМЗ 4218 4 WD', NULL,2.2,0.2,0.05,0.2),
           (3,'ГАЗ 33021','бен.',14.5,'ЗМЗ 4026,10',NULL ,1.7,0.15,0.05,0.2),
           (4,'ГАЗ 33021','СУГ',19.0,'ЗМЗ 4026,10',NULL,1.7,0.15,0.05,0.2),
           (5,'ГАЗ 3302','бен',14.7 ,'ЗМЗ 4063А',NULL ,1.7,0.15,0.05,0.2),
           (6,'ГАЗ 3302','СУГ', 19.0,'ЗМЗ 4063А',NULL ,1.7,0.15,0.05,0.2),
           (7,'ГАЗ 3307','бен.',23.8,'ЗМЗ 5130ОМ',NULL,2.1,0.3,0.1,0.25),
           (8,'ЗИЛ ММЗ 4502','бен.',36.3,'ЗИЛ 375',NULL ,2.0,0.3,0.1,0.2),
           (9,'ЗИЛ 4331','бен.',33.3,'ЗИЛ 375',NULL ,2.0,0.3,0.1,0.2),
           (10,'ЗИЛ КС2571А-1(автокран)','бен.',38.0,'ЗИЛ 130',6.1,2.2,0.3,0.1,0.2),
           (11,'МАЗ 5340 А5-370','д/т',28.8,'ЯМЗ 6582.10',NULL ,2.0,0.3,0.15,0.25),
           (12,'ГАЗ 33104','д/т',14.7,'Д 245-7Е2',NULL ,1.7,0.15,0.05,0.1),
           (13,'ГАЗ 331041-317','д/т',15.7,'Д 245-7Е3',NULL ,1.7,0.15,0.05,0.1),
           (14,'Саманд LX','бен.',9.5,'1.8 I',NULL,0.4,NULL , NULL,NULL),
           (15,'Беларусь 82.1','д/т',NULL,'Д 243',7.0,4.0,0.5,1.0,0.3),
           (16,'МТЗ 80*','д/т',NULL,'Д 243',6.5,5.0,0.5,1.0,0.3),
           (17,'Шкода Октавия**','бен',9.5 ,'1,8/118кВт TFSI-EU4',NULL ,0.4,NULL ,NULL ,NULL ),
           (18,'Шкода Практик','д/т',5.6 ,'1,4/59кВт TDIPD-EU4',NULL ,0.2,NULL , NULL,NULL ),
           (19,'Фиат Добло','д/т',6.6 ,'1,3Multijet DPF',NULL,0.1,0.01,NULL,0.1),
           (20,'РАК 8А','д/т',NULL,'S312C',1.8,5.0,0.5,1.0,0.3);
SET IDENTITY_INSERT [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы] OFF
END
           
           
           
GO

IF NOT EXISTS (SELECT ID FROM [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы])
BEGIN
SET IDENTITY_INSERT [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы] on
INSERT INTO [Путевые листы].[dbo].[Нормы расхода ГСМ2 на авто,тракторы]
           (ID ,[Марка автомобиля],[Вид топлива],[Норма расхода на 100 км летняя 6%] ,[Марка двигателя],[Норма на машино час летняя] ,[Н-ма расх.масел на 100л р-да топлива моторное,л],[Н-ма расх.масел на 100л р-да трансмиссионное,л] ,[Н-ма расх.масел на 100л р-да топлива специальное,л],[Н-ма расх.масел на 100л р-да топлива пластичные смазки,л])
     VALUES
           (1,'КаМАЗ 53212','д/т',26.8,'КаМАЗ 740.10',NULL,2.8,0.4,0.15,0.35),
           (2,'ЗИЛ 433100','д/т',23.2,'ЗИЛ 645',NULL,2.8,0.4,0.15,0.35),
           (3,'Д-606','д/т',NULL,'А-41',7.6,5.0,0.5,1.0,0.3),
           (4,'Нисан 18 NRW9','д/т',NULL,'ISUZU C-240',1.8 ,2.0,0.3,0.6,0.2),
           (5,'АМЖК-8(мини-трактор)','бен.',NULL,'УД-2',0.5 ,0.5,0.1,0.2,0.1),
           (6,'ГАЗ 330202','д/т',10.3,'ISF2.8S3129T',NULL,1.0,0.15,0.05,0.1),
           (7,'Джили SC7','бен.','8,2',NULL,NULL,NULL,NULL,NULL,NULL);
                      
  SET IDENTITY_INSERT [Путевые листы].[dbo].[Нормы расхода ГСМ на авто,тракторы] OFF
END         
           
           
GO

GO
DECLARE @VarDecimalSupported AS BIT;

SELECT @VarDecimalSupported = 0;

IF ((ServerProperty(N'EngineEdition') = 3)
    AND (((@@microsoftversion / power(2, 24) = 9)
          AND (@@microsoftversion & 0xffff >= 3024))
         OR ((@@microsoftversion / power(2, 24) = 10)
             AND (@@microsoftversion & 0xffff >= 1600))))
    SELECT @VarDecimalSupported = 1;

IF (@VarDecimalSupported > 0)
    BEGIN
        EXECUTE sp_db_vardecimal_storage_format N'$(DatabaseName)', 'ON';
    END


GO
PRINT N'Update complete.';


GO
